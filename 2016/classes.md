# Classes - SWA

* **Selector**:
	* *Responsibility*: takes a collection of objects or elements from the document and returns them.
	* *Needs*: a way to actually take the element or object; i.e., a function.
* **Extractor**:
	* *Responsibility*: extracts some relevant data from the collection returned by a *selector*.
	* *Needs*: a way to deal with the elements; i.e., a function.
* **Query**:
	* *Responsibility*: performs a query over the Internet and gets a set of raw data.
	* *Needs*: the target of the query, e.g. the semantic endpoint or a website, and the query itself, e.g. the SPARQL query or the function to get some element from the document. 
* **Getter**: 
	* *Responsibility*: takes a collection of items and a query object, and launches it with every item, taking then the raw data returned by it and processing it, extracting the relevant information.
	* *Needs*: a way to process the data; i.e., a function.
* **Builder**:
	* *Responsibility*: constructs HTML elements given the information generated by 1 o more *getters*.
	* *Needs*: the elements to construct and how to do it; i.e., a function.
* **Injector**:
	* *Responsibility*: introduces the augmentation into the document. Can be from modifying a current element or inserting one received from a *builder*.
	* *Needs*: the way to interact with the document and modify it; i.e., a function.

# Thoughs

* **Extractor** could work with 1 to N elements. We could abstract from this by always treating  element returned by selector as a collection.
* Should **Queries** be called from within the **Getter**, or should them be called from outside, as **Selectors** are? For now, we'll give that responsibility to the **Getter**.

# Protocols

* **Selector**:
	* *setParserFunction(function)*: setter for parser function, which MUST: a) receive the document as argument and b) return a collection of elements (even if there is just 1 element).
	* *run()*: invoques the parser function passing the document as argument, and returns the collection returned by it.
* **Extractor**:
	* *setParserFunction(function)*: setter for parser function, which MUST: a) receive an element as argument and b) return some data to use in a future query.
	* *run(elements)*: map each element in elements to the result of calling the parser function with it and returns the resulting collection.
* **Query**:
	* *setPlace(place)*: setter for the *place* of the query, which MUST be a semantic endpoint or a website. On *WebQuery* it lacks the URL portion which indicates the actual resources, e.g. the title id in a movie.
	* *setQuery(query)*: setter for the query itself, which MUST be a string with a SPARQL query or a function with some interaction over the document. On *SemanticQuery* it has a specific semantic, e.g. the age of some actor, but lacks the truly target, e.g. the actor.
	* *run(target)*:
		* *WebQuery*: completes the place with *target*, fetches the document from the website and pass it to the query function to extract some element from it and returns it.
		* *SemanticQuery*: complets the query with *target*, performs the SPARQL query against the endpoint place and returns the result.
* **Getter**:
	* *setQuery(query)*: setter for a query object.
	* *run(items)*: maps every item in items to the result of performing the query with it. Returns the resulting collection.